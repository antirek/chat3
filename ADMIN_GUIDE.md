# üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ AdminJS –ø–∞–Ω–µ–ª–∏

## üåê –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ

URL: http://localhost:3000/admin

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (–æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–æ–≤

### 1. –†–∞–∑–¥–µ–ª "–°–∏—Å—Ç–µ–º–∞" üè¢

#### Tenants (–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.

**–¢–∏–ø—ã —Ç–µ–Ω–∞–Ω—Ç–æ–≤:**
- `system` - –°–∏—Å—Ç–µ–º–Ω—ã–π —Ç–µ–Ω–∞–Ω—Ç (–¥–ª—è –±–æ—Ç–æ–≤ –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- `client` - –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ç–µ–Ω–∞–Ω—Ç (–æ–±—ã—á–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)

**–ü–æ–ª—è:**
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `domain` - –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
- `type` - –¢–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `isActive` - –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏
- `settings` - JSON –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –£–¥–∞–ª–∏—Ç—å
- ‚úÖ –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–∏–ø—É

---

#### ApiKey (API –ö–ª—é—á–∏)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ REST API.

**–ü–æ–ª—è:**
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—é—á–∞
- `key` - –°–∞–º API –∫–ª—é—á (–≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ)
- `tenantId` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- `permissions` - –ü—Ä–∞–≤–∞ (read, write, delete)
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
- `expiresAt` - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- `lastUsedAt` - –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å API –∫–ª—é—á:**
1. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª: `npm run generate-api-key`
4. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é, —É–∫–∞–∑–∞–≤ –≤—Å–µ –ø–æ–ª—è

**üí° –°–æ–≤–µ—Ç**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π - —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.

---

### 2. –†–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" üë•

#### Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã.

**–¢–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- `bot` - –ë–æ—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- `user` - –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**–†–æ–ª–∏:**
- `admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `user` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `moderator` - –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä

**–ü–æ–ª—è:**
- `username` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–Ω–∞–Ω—Ç–∞)
- `password` - –ü–∞—Ä–æ–ª—å (–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ)
- `type` - –¢–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `role` - –†–æ–ª—å
- `firstName`, `lastName` - –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è
- `avatar` - URL –∞–≤–∞—Ç–∞—Ä–∞
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
- `lastSeen` - –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ —Ç–∏–ø—É (bot/user)
- –ü–æ —Ä–æ–ª–∏
- –ü–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ü–æ —Å—Ç–∞—Ç—É—Å—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### 3. –†–∞–∑–¥–µ–ª "–ß–∞—Ç—ã" üí¨

#### Dialog (–î–∏–∞–ª–æ–≥–∏)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏ –∏ –¥–∏–∞–ª–æ–≥–∞–º–∏.

**–¢–∏–ø—ã –¥–∏–∞–ª–æ–≥–æ–≤:**
- `private` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π (1-–Ω–∞-1)
- `group` - –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
- `channel` - –ö–∞–Ω–∞–ª

**–ü–æ–ª—è:**
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞
- `type` - –¢–∏–ø
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `createdBy` - –°–æ–∑–¥–∞—Ç–µ–ª—å
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
- `lastMessageAt` - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–∏–∞–ª–æ–≥–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ **DialogParticipant**!

**–ö–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–∏–∞–ª–æ–≥–∞:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `_id` –¥–∏–∞–ª–æ–≥–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **DialogParticipant**
3. –í —Ñ–∏–ª—å—Ç—Ä–∞—Ö –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ **dialogId**
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID
5. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"
6. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —ç—Ç–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞

---

#### DialogParticipant (–£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤) ‚≠ê
**–≠—Ç–æ –≥–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏!**

**–ü–æ–ª—è:**
- `dialogId` - –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–∏–∞–ª–æ–≥ (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞)
- `userId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å ObjectId –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
- `role` - –†–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞:
  - `owner` - –í–ª–∞–¥–µ–ª–µ—Ü
  - `admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  - `member` - –£—á–∞—Å—Ç–Ω–∏–∫
- `tenantId` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- `isActive` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
- `joinedAt` - –î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- `leftAt` - –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ (–µ—Å–ª–∏ –ø–æ–∫–∏–Ω—É–ª)

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –¥–∏–∞–ª–æ–≥:**
1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **dialogId** –∏–∑ —Å–ø–∏—Å–∫–∞
3. –í–≤–µ–¥–∏—Ç–µ **userId** (–º–æ–∂–Ω–æ –ª—é–±—É—é —Å—Ç—Ä–æ–∫—É!)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `68f76d3d559248883344a38c` (ObjectId)
   - –ò–ª–∏: `external_user_123` (–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π ID)
   - –ò–ª–∏: `bot_assistant` (—Å—Ç—Ä–æ–∫–æ–≤—ã–π ID)
4. –í—ã–±–µ—Ä–∏—Ç–µ **role** (–í–ª–∞–¥–µ–ª–µ—Ü/–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä/–£—á–∞—Å—Ç–Ω–∏–∫)
5. –í—ã–±–µ—Ä–∏—Ç–µ **tenantId**
6. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- –ü–æ –¥–∏–∞–ª–æ–≥—É (dialogId)
- –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (userId)
- –ü–æ —Ä–æ–ª–∏
- –ü–æ —Å—Ç–∞—Ç—É—Å—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**üí° –°–æ–≤–µ—Ç**: –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –¥–∏–∞–ª–æ–≥–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ ID –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä –ø–æ dialogId, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

---

#### Message (–°–æ–æ–±—â–µ–Ω–∏—è)
–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–∞—Ö.

**–¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π:**
- `text` - –¢–µ–∫—Å—Ç–æ–≤–æ–µ
- `image` - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `video` - –í–∏–¥–µ–æ
- `audio` - –ê—É–¥–∏–æ
- `file` - –§–∞–π–ª
- `system` - –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–ü–æ–ª—è:**
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `dialogId` - –î–∏–∞–ª–æ–≥
- `senderId` - –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
- `type` - –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
- `attachments` - –í–ª–æ–∂–µ–Ω–∏—è
- `replyTo` - –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `isEdited` - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ
- `isDeleted` - –£–¥–∞–ª–µ–Ω–æ
- `readBy` - –ö—Ç–æ –ø—Ä–æ—á–∏—Ç–∞–ª

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ –¥–∏–∞–ª–æ–≥—É
- –ü–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é
- –ü–æ —Ç–∏–ø—É
- –ü–æ —Å—Ç–∞—Ç—É—Å—É —É–¥–∞–ª–µ–Ω–∏—è

---

#### Meta (–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
–ì–∏–±–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª—é–±—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–æ—Ç–æ–≤
- –õ—é–±—ã–µ key-value –¥–∞–Ω–Ω—ã–µ

**–ü–æ–ª—è:**
- `key` - –ö–ª—é—á
- `value` - –ó–Ω–∞—á–µ–Ω–∏–µ (–ª—é–±–æ–π —Ç–∏–ø)
- `entityType` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ (user/dialog/message/tenant/system)
- `entityId` - ID —Å—É—â–Ω–æ—Å—Ç–∏
- `dataType` - –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (string/number/boolean/object/array)
- `isPublic` - –ü—É–±–ª–∏—á–Ω—ã–µ –ª–∏ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `key: 'theme', value: 'dark'`
- –§–ª–∞–≥ –±–æ—Ç–∞: `key: 'isBot', value: true`
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞: `key: 'capabilities', value: ['notifications']`

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏
- –ü–æ –∫–ª—é—á—É
- –ü–æ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏

---

## üîç –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–∏–∞–ª–æ–≥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Dialog**
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –¥–∏–∞–ª–æ–≥ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ **_id**
3. –û—Ç–∫—Ä–æ–π—Ç–µ **DialogParticipant**
4. –ù–∞–∂–º–∏—Ç–µ **"–§–∏–ª—å—Ç—Ä"**
5. –í –ø–æ–ª–µ **dialogId** –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID
6. –ù–∞–∂–º–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å
7. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –∏—Ö —Ä–æ–ª—è–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

1. **–°–æ–∑–¥–∞–π—Ç–µ Dialog:**
   - –†–∞–∑–¥–µ–ª **Dialog** ‚Üí **"–°–æ–∑–¥–∞—Ç—å"**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ name, type, –≤—ã–±–µ—Ä–∏—Ç–µ createdBy
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π _id

2. **–î–æ–±–∞–≤—å—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
   - –†–∞–∑–¥–µ–ª **DialogParticipant** ‚Üí **"–°–æ–∑–¥–∞—Ç—å"**
   - –í—Å—Ç–∞–≤—å—Ç–µ dialogId
   - –í–≤–µ–¥–∏—Ç–µ userId –ø–µ—Ä–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å "owner"
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å —Ä–æ–ª—å—é "member"

### –ü–æ–∏—Å–∫ –±–æ—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Users**
2. –ù–∞–∂–º–∏—Ç–µ **"–§–∏–ª—å—Ç—Ä"**
3. –í –ø–æ–ª–µ **type** –≤—ã–±–µ—Ä–∏—Ç–µ **"–ë–æ—Ç"**
4. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ—Ö –±–æ—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ **Users**
2. –û—Ç–∫—Ä–æ–π—Ç–µ **DialogParticipant**
3. –ù–∞–∂–º–∏—Ç–µ **"–§–∏–ª—å—Ç—Ä"**
4. –í –ø–æ–ª–µ **userId** –≤—Å—Ç–∞–≤—å—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏, –≥–¥–µ —ç—Ç–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫
6. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **dialogId** —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –¥–∏–∞–ª–æ–≥—É

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `npm run seed` —Å–æ–∑–¥–∞—é—Ç—Å—è:
- 2 —Ç–µ–Ω–∞–Ω—Ç–∞ (System + Demo Company)
- 4 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (1 –±–æ—Ç + 3 –æ–±—ã—á–Ω—ã—Ö)
- 1 –¥–∏–∞–ª–æ–≥ "–û–±—â–∏–π —á–∞—Ç"
- 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –¥–∏–∞–ª–æ–≥–µ
- 3 —Å–æ–æ–±—â–µ–Ω–∏—è
- 5 –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

**–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:**
- Tenants ‚Üí —Ñ–∏–ª—å—Ç—Ä `type = system`
- Users ‚Üí —Ñ–∏–ª—å—Ç—Ä `type = bot`

**–ê–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏:**
- DialogParticipant ‚Üí —Ñ–∏–ª—å—Ç—Ä `isActive = true`

**–°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞:**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –¥–∏–∞–ª–æ–≥–∞
- Message ‚Üí —Ñ–∏–ª—å—Ç—Ä –ø–æ `dialogId`

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –†–∞–±–æ—Ç–∞ —Å ID
- –í—Å–µ ID –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–∫–æ–º
- ID –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã - –≤–µ–¥—É—Ç –∫ —Å–≤—è–∑–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

### 2. –ü–æ–∏—Å–∫
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –§–∏–ª—å—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö

### 3. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤
- **–í—Å–µ–≥–¥–∞** —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É **DialogParticipant**
- –°—Ç–∞—Ä–æ–µ –ø–æ–ª–µ `participants` –≤ Dialog –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
- userId –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π —Å—Ç—Ä–æ–∫–æ–π, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ObjectId

### 4. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Meta –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–µ `value` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
- –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `dataType` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤–º–µ—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
- –ò–Ω–¥–µ–∫—Å—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –°–≤—è–∑–∏ (references) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥–∏–∞–ª–æ–≥ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
2. **Email —É–Ω–∏–∫–∞–ª–µ–Ω**: –í —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ç–µ–Ω–∞–Ω—Ç–∞ email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
3. **Domain —É–Ω–∏–∫–∞–ª–µ–Ω**: –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è —Ç–µ–Ω–∞–Ω—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ —Å–∏—Å—Ç–µ–º–µ
4. **API –∫–ª—é—á–∏**: –ü—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Ç–µ–Ω–∞–Ω—Ç—É, —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø–∏—Å–µ–π —Å–≤–æ–µ–≥–æ —Ç–µ–Ω–∞–Ω—Ç–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

```
Tenant
  ‚îú‚îÄ User (tenantId)
  ‚îú‚îÄ Dialog (tenantId)
  ‚îú‚îÄ Message (tenantId)
  ‚îú‚îÄ Meta (tenantId)
  ‚îî‚îÄ ApiKey (tenantId)

Dialog
  ‚îú‚îÄ DialogParticipant (dialogId)
  ‚îî‚îÄ Message (dialogId)

User
  ‚îú‚îÄ DialogParticipant (userId as string)
  ‚îî‚îÄ Message (senderId)
```

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í—Å–µ –º–æ–¥–µ–ª–∏ –∏–º–µ—é—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π (references)


