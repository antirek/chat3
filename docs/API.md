# API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Chat3

## –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:3000/api
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key`:

```http
X-API-Key: your-api-key-here
X-Tenant-ID: tnt_default
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API –∫–ª—é—á–∞

```bash
npm run generate-key
```

## –û–±—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

- `X-API-Key` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - API –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `X-Tenant-ID` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID —Ç–µ–Ω–∞–Ω—Ç–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `tnt_default`
- `X-Idempotency-Key` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ö–ª—é—á –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "data": { ... },
  "message": "–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
}
```

### –û—à–∏–±–∫–∞

```json
{
  "error": "Error Type",
  "message": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

## –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ endpoints –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é:

- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10-50)

–û—Ç–≤–µ—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:

```json
{
  "data": [ ... ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 100,
    "pages": 10
  }
}
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:

### 1. JSON —Ñ–æ—Ä–º–∞—Ç

```json
{
  "meta": {
    "type": "internal"
  }
}
```

### 2. –û–ø–µ—Ä–∞—Ç–æ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```
(field,operator,value)
```

**–û–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
- `eq` - —Ä–∞–≤–Ω–æ
- `ne` - –Ω–µ —Ä–∞–≤–Ω–æ
- `in` - –≤ –º–∞—Å—Å–∏–≤–µ: `(type,in,[user,bot])`
- `nin` - –Ω–µ –≤ –º–∞—Å—Å–∏–≤–µ
- `gt` - –±–æ–ª—å—à–µ
- `gte` - –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
- `lt` - –º–µ–Ω—å—à–µ
- `lte` - –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
- `regex` - —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- `exists` - —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è

**–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (AND):**
```
(meta.type,eq,internal)&(meta.channelType,ne,telegram)
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `(userId,eq,cnt_72a454kho)` - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
- `(name,regex,^John)` - –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å John
- `(type,in,[user,bot])` - —Ç–∏–ø –≤ —Å–ø–∏—Å–∫–µ
- `(meta.role,eq,manager)` - —Ñ–∏–ª—å—Ç—Ä –ø–æ meta —Ç–µ–≥—É

## Endpoints

### Tenants (–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)

#### GET /api/tenants
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

#### GET /api/tenants/:id
–ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ ID

#### POST /api/tenants
–°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é

**Body:**
```json
{
  "tenantId": "tnt_myorg",
  "name": "My Organization",
  "domain": "myorg.chat3.com",
  "type": "client",
  "isActive": true
}
```

#### PUT /api/tenants/:id
–û–±–Ω–æ–≤–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é

#### DELETE /api/tenants/:id
–£–¥–∞–ª–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é

---

### Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

#### GET /api/users
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page`, `limit` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- `filter` - —Ñ–∏–ª—å—Ç—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: `(userId,eq,carl)`)
- `sort` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: `{"createdAt":-1}`
- `includeDialogCount` - –≤–∫–ª—é—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- `(userId,eq,carl)` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å userId = carl
- `(type,in,[user,bot])` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–∏–ø–∞ user –∏–ª–∏ bot
- `(name,regex,^John)` - –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å John
- `(meta.role,eq,manager)` - —Ñ–∏–ª—å—Ç—Ä –ø–æ meta —Ç–µ–≥—É

#### GET /api/users/:userId
–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ userId

#### POST /api/users
–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Body:**
```json
{
  "userId": "carl",
  "name": "Carl Johnson",
  "type": "user"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- `userId` –Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ—á–∫—É (`.`)
- `type` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `user`

#### PUT /api/users/:userId
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Body:**
```json
{
  "name": "New Name",
  "type": "bot"
}
```

#### DELETE /api/users/:userId
–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### POST /api/users/:userId/activity
–û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### Dialogs (–î–∏–∞–ª–æ–≥–∏)

#### GET /api/dialogs
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page`, `limit` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- `filter` - —Ñ–∏–ª—å—Ç—Ä
- `sort` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- `(meta.type,eq,internal)` - –¥–∏–∞–ª–æ–≥–∏ —Ç–∏–ø–∞ internal
- `(meta.channelType,eq,whatsapp)` - WhatsApp –¥–∏–∞–ª–æ–≥–∏
- `(dialogId,eq,dlg_...)` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∏–∞–ª–æ–≥

#### GET /api/dialogs/:id
–ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ ID

#### POST /api/dialogs
–°–æ–∑–¥–∞—Ç—å –¥–∏–∞–ª–æ–≥

**Body:**
```json
{
  "name": "VIP —á–∞—Ç",
  "createdBy": "agent_42",
  "members": [
    {
      "userId": "carl",
      "type": "user",
      "name": "Carl Johnson"
    },
    {
      "userId": "bot_123",
      "type": "bot",
      "name": "Support Bot"
    }
  ],
  "meta": {
    "channel": "whatsapp",
    "greeting": {
      "value": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!",
      "dataType": "string",
      "scope": "user_alice"
    }
  }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏–∞–ª–æ–≥–∞ —Å `members`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `User`
- –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–∏–∞–ª–æ–≥–µ, –æ–Ω –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

#### DELETE /api/dialogs/:id
–£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥

---

### Messages (–°–æ–æ–±—â–µ–Ω–∏—è)

#### GET /api/dialogs/:dialogId/messages
–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page`, `limit` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- `filter` - —Ñ–∏–ª—å—Ç—Ä
- `sort` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- `(type,eq,internal.text)` - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `(senderId,eq,carl)` - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç carl
- `(meta.channelType,eq,whatsapp)` - WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è

#### POST /api/dialogs/:dialogId/messages
–°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**Body:**
```json
{
  "senderId": "carl",
  "content": "Hello!",
  "type": "internal.text"
}
```

#### GET /api/messages/:messageId
–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ ID

#### PUT /api/messages/:messageId/content
–û–±–Ω–æ–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**Body:**
```json
{
  "content": "Updated content"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ `content`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `message.update`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è meta —Ç–µ–≥ `updated`

---

### Message Status (–°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π)

#### POST /api/messages/:messageId/status/:userId/:status
–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å—ã:**
- `sent` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- `delivered` - –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- `read` - –ø—Ä–æ—á–∏—Ç–∞–Ω–æ

---

### Message Reactions (–†–µ–∞–∫—Ü–∏–∏)

#### GET /api/messages/:messageId/reactions
–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### POST /api/messages/:messageId/reactions
–î–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

**Body:**
```json
{
  "userId": "carl",
  "reaction": "üëç"
}
```

#### DELETE /api/messages/:messageId/reactions/:reaction
–£–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

---

### Dialog Members (–£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤)

#### GET /api/dialogs/:dialogId/members
–ü–æ–ª—É—á–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–∏–∞–ª–æ–≥–∞

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filter` - —Ñ–∏–ª—å—Ç—Ä
- `sort` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

#### POST /api/dialogs/:dialogId/members/add
–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –¥–∏–∞–ª–æ–≥

**Body:**
```json
{
  "userId": "carl",
  "type": "user",
  "name": "Carl Johnson"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `User`
- –ï—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–∏–∞–ª–æ–≥–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 200 –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞

#### POST /api/dialogs/:dialogId/members/:userId/remove
–£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ –¥–∏–∞–ª–æ–≥–∞

#### PATCH /api/dialogs/:dialogId/members/:userId/unread
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**Body:**
```json
{
  "unreadCount": 5,
  "lastSeenAt": 1763551369397.6482,
  "reason": "Manual update"
}
```

---

### User Dialogs (–î–∏–∞–ª–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

#### GET /api/users/:userId/dialogs
–ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ª–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page`, `limit` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- `filter` - —Ñ–∏–ª—å—Ç—Ä
- `includeLastMessage` - –≤–∫–ª—é—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `scope` - scope –¥–ª—è meta —Ç–µ–≥–æ–≤

#### GET /api/users/:userId/dialogs/:dialogId/messages
–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### GET /api/users/:userId/dialogs/:dialogId/messages/:messageId
–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### Meta Tags (–ú–µ—Ç–∞-—Ç–µ–≥–∏)

#### GET /api/meta/:entityType/:entityId
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ meta —Ç–µ–≥–∏ —Å—É—â–Ω–æ—Å—Ç–∏

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `scope` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π scope –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**Entity Types:**
- `dialog` - –¥–∏–∞–ª–æ–≥
- `message` - —Å–æ–æ–±—â–µ–Ω–∏–µ
- `user` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/meta/dialog/dlg_abc123?scope=user_alice
```

#### PUT /api/meta/:entityType/:entityId/:key
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å meta —Ç–µ–≥

**Body (–ø—Ä–æ—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ):**
```json
{
  "value": "whatsapp"
}
```

**Body (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ):**
```json
{
  "value": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!",
  "dataType": "string",
  "scope": "user_alice"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `scope` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π scope
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ meta —Ç–µ–≥–æ–≤, scoped –∑–Ω–∞—á–µ–Ω–∏—è –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### DELETE /api/meta/:entityType/:entityId/:key
–£–¥–∞–ª–∏—Ç—å meta —Ç–µ–≥

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `scope` - —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ scoped –∑–Ω–∞—á–µ–Ω–∏–µ

---

### Typing (–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏)

#### POST /api/dialogs/:dialogId/member/:userId/typing
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏

**Body:**
```json
{
  "isTyping": true
}
```

---

## –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

- `200` - –£—Å–ø–µ—à–Ω–æ
- `201` - –°–æ–∑–¥–∞–Ω–æ
- `204` - –ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (—É—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403` - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- `409` - –ö–æ–Ω—Ñ–ª–∏–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## Swagger UI

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:3000/api-docs
```

