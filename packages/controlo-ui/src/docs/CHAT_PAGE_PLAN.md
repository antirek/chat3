# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ß–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ controlo-ui, –≥–¥–µ –º–æ–∂–Ω–æ:
1. –í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –µ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤
3. –í—ã–±—Ä–∞—Ç—å –¥–∏–∞–ª–æ–≥
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tenantId
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π tenantId –∏–∑ `credentialsStore`
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Tenant-ID` –∏–∑ credentials store

### API Endpoints
- **GET /api/users** - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é)
- **GET /api/users/{userId}/dialogs** - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **GET /api/users/{userId}/dialogs/{dialogId}/messages** - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- **POST /api/dialogs/{dialogId}/messages** - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ (–Ω–µ –∫–∞–∫ –≤ user-dialogs)
- –¢—Ä–∏ –∫–æ–ª–æ–Ω–∫–∏ –∏–ª–∏ –æ–±–ª–∞—Å—Ç–∏:
  1. –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫)
  2. –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  3. –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π + –ø–æ–ª–µ –≤–≤–æ–¥–∞

---

## –†–µ—à–µ–Ω–∏—è –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–≤–µ—Ä—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ä—ã—Ö (lazy loading)
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–≤–µ—Ä—Ö

2. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏: 3, 5, 10, 30 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π**: –°—Ç–∏–ª—å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –°—Ç–∏–ª—å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ - —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞, —á—É–∂–∏–µ —Å–ª–µ–≤–∞

4. **–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π**: –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (type: "internal.text")

5. **–ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (isMine = true)

6. **Layout**: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –¥–∏–∞–ª–æ–≥–∏ —Å–≤–µ—Ä—Ö—É –≤ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞—Ö, –∑–∞—Ç–µ–º –ª–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ–ª–µ –≤–≤–æ–¥–∞

7. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: –ö–∞–∫ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ
   - ‚úÖ **–ü—Ä–∏–Ω—è—Ç–æ**: –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–Ω–∏–∑—É, —Å—Ç–∞—Ä—ã–µ —Å–≤–µ—Ä—Ö—É (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -createdAt, –Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)

---

## –≠—Ç–∞–ø 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 1.1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `packages/controlo-ui/src/pages/chat/`

**–§–∞–π–ª—ã:**
```
chat/
‚îú‚îÄ‚îÄ index.ts                          # –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ ChatPage.vue                 # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ UserSelector.vue             # –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ DialogSelector.vue           # –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ AutoRefreshSelector.vue      # –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ MessagesList.vue             # –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ MessageInput.vue             # –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îî‚îÄ‚îÄ model/
    ‚îú‚îÄ‚îÄ useChat.ts                   # –û—Å–Ω–æ–≤–Ω–æ–π composable –¥–ª—è —á–∞—Ç–∞
    ‚îú‚îÄ‚îÄ useUsers.ts                  # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îú‚îÄ‚îÄ useDialogs.ts                # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ‚îÄ useMessages.ts               # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ useMessageInput.ts           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ useAutoRefresh.ts            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π
```

### 1.2. Layout —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**ChatPage.vue:**
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
  1. **–í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å**: 
     - UserSelector (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
     - DialogSelector (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
     - AutoRefreshSelector (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 3, 5, 10, 30 —Å–µ–∫, "–í—ã–∫–ª")
  2. **–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å**: 
     - MessagesList (–ª–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
  3. **–ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å**: 
     - MessageInput (–ø–æ–ª–µ –≤–≤–æ–¥–∞ + –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏)

---

## –≠—Ç–∞–ø 2: Composables

### 2.1. `useUsers.ts`
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `/api/users`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `getTenantApiUrl` –∏ `credentialsStore.getHeaders()`

### 2.2. `useDialogs.ts`
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ `/api/users/{userId}/dialogs`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∏–∞–ª–æ–≥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `getTenantApiUrl` –∏ `credentialsStore.getHeaders()`

### 2.3. `useMessages.ts`
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ `/api/users/{userId}/dialogs/{dialogId}/messages?limit=10&sort=-createdAt`
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ `POST /api/dialogs/{dialogId}/messages`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

### 2.4. `useMessageInput.ts`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è (–Ω–µ –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (Enter –∏–ª–∏ –∫–Ω–æ–ø–∫–∞)

### 2.5. `useAutoRefresh.ts`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã: 3, 5, 10, 30 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ "–í—ã–∫–ª"
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `setInterval` –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –û—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ —Å–º–µ–Ω–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

### 2.6. `useChat.ts`
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ composables
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: selectedUserId, selectedDialogId, autoRefreshInterval
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

---

## –≠—Ç–∞–ø 3: UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 3.1. `UserSelector.vue`
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (select) —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç userId –∏–ª–∏ name –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –µ–≥–æ –¥–∏–∞–ª–æ–≥–∏
- Placeholder: "–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"

### 3.2. `DialogSelector.vue`
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (select) —Å –¥–∏–∞–ª–æ–≥–∞–º–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: dialogId (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å unreadCount –≤ —Å–∫–æ–±–∫–∞—Ö)
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∏–∞–ª–æ–≥–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
- Placeholder: "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ª–æ–≥" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤—ã–±—Ä–∞–Ω)

### 3.3. `AutoRefreshSelector.vue`
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (select) —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –í–∞—Ä–∏–∞–Ω—Ç—ã: "–í—ã–∫–ª" (0), "3 —Å–µ–∫", "5 —Å–µ–∫", "10 —Å–µ–∫", "30 —Å–µ–∫"
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è/–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 3.4. `MessagesList.vue`
- –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç–∏–ª–µ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞:
  - –°–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (isMine = true) - —Å–ø—Ä–∞–≤–∞, —Å–∏–Ω–∏–π/–∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
  - –ß—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è - —Å–ª–µ–≤–∞, —Å–µ—Ä—ã–π/–±–µ–ª—ã–π —Ü–≤–µ—Ç
- –ü–æ–∫–∞–∑ senderId, content, createdAt (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è)
- –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (sent, delivered, read)
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–≤–µ—Ä—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (lazy loading)
- –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### 3.5. `MessageInput.vue`
- Textarea –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–æ–ª—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (Shift+Enter –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—É—Å—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- Placeholder: "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
- –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 4.1. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç

**–§–∞–π–ª:** `packages/controlo-ui/src/app/router/index.ts`

**–î–æ–±–∞–≤–∏—Ç—å:**
```typescript
{
  path: '/chat',
  name: 'chat',
  component: () => import('@/pages/chat'),
}
```

### 4.2. –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

**–§–∞–π–ª:** `packages/controlo-ui/src/widgets/app-layout/ui/AppLayout.vue`

**–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ activity:**
```vue
<router-link
  to="/chat"
  class="nav-link"
  title="–ß–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
>
  <span class="nav-link-icon">üí¨</span>
</router-link>
```

---

## –≠—Ç–∞–ø 5: –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 5.1. –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**API:** `GET /api/users?limit=100`

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

### 5.2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤

**API:** `GET /api/users/{userId}/dialogs?limit=50`

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–∏–∞–ª–æ–≥ - –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

### 5.3. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**API:** `GET /api/users/{userId}/dialogs/{dialogId}/messages?limit=10&sort=-createdAt`

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–∞–º—ã–µ –Ω–æ–≤—ã–µ)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `-createdAt` (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏ –≤ –æ—Ç–≤–µ—Ç–µ API)
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å—Ç–∞—Ä—ã–µ —Å–≤–µ—Ä—Ö—É, –Ω–æ–≤—ã–µ —Å–Ω–∏–∑—É) - –∫–∞–∫ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö
- –ü—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–≤–µ—Ä—Ö –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (lazy loading)
- –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### 5.4. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

**API:** `POST /api/dialogs/{dialogId}/messages`

**Body:**
```json
{
  "content": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
  "senderId": "userId",
  "type": "internal.text"
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
- –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∫ –Ω–æ–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é

### 5.5. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–õ–æ–≥–∏–∫–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `setInterval` –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã: 3, 5, 10, 30 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ "–í—ã–∫–ª" (0)
- –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –¥–∏–∞–ª–æ–≥
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–∏–∞–ª–æ–≥–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—á–∏—â–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 5.6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (–Ω–µ –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ

---

## –≠—Ç–∞–ø 6: –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

### 6.1. Layout
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout:
  - –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å: —Ç—Ä–∏ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞ –≤ —Ä—è–¥ (UserSelector, DialogSelector, AutoRefreshSelector)
  - –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å: MessagesList (flex: 1, overflow-y: auto)
  - –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: MessageInput (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞)

### 6.2. –°—Ç–∏–ª—å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
- –°–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (isMine = true):
  - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: —Å–ø—Ä–∞–≤–∞
  - –¶–≤–µ—Ç —Ñ–æ–Ω–∞: —Å–∏–Ω–∏–π (#007bff –∏–ª–∏ #0084ff)
  - –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞: –±–µ–ª—ã–π
  - –ü—É–∑—ã—Ä–µ–∫ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ —Å–ø—Ä–∞–≤–∞
- –ß—É–∂–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
  - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: —Å–ª–µ–≤–∞
  - –¶–≤–µ—Ç —Ñ–æ–Ω–∞: —Å–µ—Ä—ã–π/–±–µ–ª—ã–π (#e9ecef –∏–ª–∏ #f1f3f5)
  - –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞: —á–µ—Ä–Ω—ã–π
  - –ü—É–∑—ã—Ä–µ–∫ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ —Å–ª–µ–≤–∞
- Timestamp –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º (–º–∞–ª–µ–Ω—å–∫–∏–π —à—Ä–∏—Ñ—Ç, —Å–µ—Ä—ã–π —Ü–≤–µ—Ç)
- –°—Ç–∞—Ç—É—Å—ã –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (sent, delivered, read) - –∏–∫–æ–Ω–∫–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞ –æ—Ç timestamp

### 6.3. –ü–æ–ª–µ –≤–≤–æ–¥–∞
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- Textarea —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–æ–ª—è
- Placeholder: "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ textarea, –∞–≤—Ç–æ—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
2. ‚¨ú –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ñ–∞–π–ª—ã)
3. ‚¨ú –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å composables (useUsers, useDialogs, useMessages, useMessageInput, useChat)
4. ‚¨ú –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (UserSelector, DialogsList, MessagesList)
5. ‚¨ú –°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ChatPage.vue
6. ‚¨ú –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é
7. ‚¨ú –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getTenantApiUrl` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è URL
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `credentialsStore.getHeaders()` –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- tenantId –±–µ—Ä–µ—Ç—Å—è –∏–∑ `credentialsStore.tenantId`
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–≤–µ—Ä—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ä—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (type: "internal.text")
- –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (isMine = true)
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π: –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ 3, 5, 10, 30 —Å–µ–∫—É–Ω–¥ –∏–ª–∏ "–í—ã–∫–ª"
- Layout: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –¥–∏–∞–ª–æ–≥–∏ –≤ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞—Ö —Å–≤–µ—Ä—Ö—É
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: –Ω–æ–≤—ã–µ —Å–Ω–∏–∑—É, —Å—Ç–∞—Ä—ã–µ —Å–≤–µ—Ä—Ö—É (–∫–∞–∫ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö)